<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ“ä½œç³»ç»Ÿåˆ¤æ–­é¢˜éšæœºæµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }
        
        .info-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f0f8ff;
            border-radius: 5px;
        }
        
        .question-container {
            margin-bottom: 20px;
        }
        
        .question {
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: bold;
            color: #333;
            line-height: 1.8;
        }
        
        .options {
            margin-left: 20px;
        }
        
        .option {
            margin-bottom: 12px;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
        }
        
        .option:hover {
            background-color: #f0f8ff;
            transform: translateY(-2px);
        }
        
        .option.selected {
            background-color: #e1f5fe;
            border-left: 5px solid #2196f3;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .option.correct {
            background-color: #e8f5e9;
            border-left: 5px solid #4caf50;
        }
        
        .option.incorrect {
            background-color: #ffebee;
            border-left: 5px solid #f44336;
        }
        
        .option-text {
            margin-left: 10px;
            font-size: 16px;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        button {
            padding: 12px 24px;
            background-color: #2196f3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        button:hover {
            background-color: #1976d2;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result {
            margin-top: 30px;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            font-size: 18px;
            display: none;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.5s forwards;
        }
        
        .result.pass {
            background-color: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #c8e6c9;
        }
        
        .result.fail {
            background-color: #ffebee;
            color: #c62828;
            border: 1px solid #ffcdd2;
        }
        
        .score {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: #2196f3;
            width: 0%;
            transition: width 0.3s ease-in-out;
        }
        
        .answer-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }
        
        .correct-answer {
            background-color: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }
        
        .result-details {
            text-align: left;
            margin-top: 20px;
            padding: 15px;
            background-color: white;
            border-radius: 5px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .wrong-question {
            background-color: #ffebee;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            border-left: 4px solid #f44336;
        }
        
        .wrong-answer {
            color: #c62828;
            font-weight: bold;
        }
        
        .correct-answer-detail {
            color: #2e7d32;
            font-weight: bold;
        }
        
        .restart-btn {
            margin-top: 20px;
            background-color: #4caf50;
        }
        
        .restart-btn:hover {
            background-color: #388e3c;
        }
        
        .show-answer-btn {
            background-color: #9c27b0;
        }
        
        .show-answer-btn:hover {
            background-color: #7b1fa2;
        }
        
        .show-answer-btn:disabled {
            background-color: #ccc;
        }
        
        .option-indicator {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .selected .option-indicator {
            background-color: #2196f3;
            color: white;
        }
        
        .correct .option-indicator {
            background-color: #4caf50;
            color: white;
        }
        
        .incorrect .option-indicator {
            background-color: #f44336;
            color: white;
        }

           .home-link {
            position: absolute;
            top: 20px;
            left: 20px;
            text-decoration: none;
            color: #2196f3;
            font-weight: bold;
            font-size: 16px;
            padding: 8px 15px;
            border: 1px solid #2196f3;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .home-link:hover {
            background-color: #2196f3;
            color: white;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .test-info {
            text-align: center;
            margin-bottom: 20px;
            color: #666;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <a href="index.html" class="home-link">è¿”å›ä¸»é¡µ</a>
    <div class="container">
        <h1>æ“ä½œç³»ç»Ÿåˆ¤æ–­é¢˜éšæœºæµ‹è¯•</h1>
        
        <div class="info-bar">
            <div>å½“å‰é¢˜å·: <span id="current-question">1</span>/<span id="total-questions">10</span></div>
            <div>å·²ç­”: <span id="answered-count">0</span>/10</div>
        </div>
        
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        
        <div class="question-container" id="question-container">
            <!-- é¢˜ç›®å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <div>
            <button id="show-answer-btn" class="show-answer-btn" disabled>æŸ¥çœ‹ç­”æ¡ˆ</button>
        </div>
        
        <div id="answer-feedback" class="answer-feedback">
            <!-- ç­”æ¡ˆåé¦ˆå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
        
        <div class="controls">
            <button id="prev-btn" disabled>ä¸Šä¸€é¢˜</button>
            <button id="next-btn">ä¸‹ä¸€é¢˜</button>
            <button id="submit-btn" style="display: none;">æäº¤ç­”æ¡ˆ</button>
        </div>
        
        <div class="result" id="result">
            <!-- ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
    </div>

    <script>
        // åˆ¤æ–­é¢˜æ•°æ®
        const judgementQuestions = [
            {
                id: 1,
                question: "çº¿ç¨‹æ˜¯CPUè°ƒåº¦çš„åŸºæœ¬å•ä½,çº¿ç¨‹ä¹‹é—´å…±äº«è¿›ç¨‹çš„èµ„æº,ä¸”æ‹¥æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ã€‚()",
                answer: "B"
            },
            {
                id: 2,
                question: "ä¿¡å·é‡çš„åˆå€¼åªèƒ½ä¸ºæ­£æ•´æ•°ï¼Œä¸èƒ½ä¸º0æˆ–è´Ÿæ•°ã€‚()",
                answer: "B"
            },
            {
                id: 3,
                question: "ç®¡ç¨‹æ˜¯ä¸€ç§åŒæ­¥æœºåˆ¶,å°†å…±äº«å˜é‡å’Œå¯¹å…±äº«å˜é‡çš„æ“ä½œå°è£…åœ¨ä¸€èµ·,å®ç°è¿›ç¨‹åŒæ­¥ã€‚()",
                answer: "A"
            },
            {
                id: 4,
                question: "åˆ†æ®µå­˜å‚¨ç®¡ç†ä¸­,æ®µçš„å¤§å°æ˜¯å›ºå®šçš„,æ®µçš„é•¿åº¦ç”±æ“ä½œç³»ç»Ÿå†³å®šã€‚()",
                answer: "B"
            },
            {
                id: 5,
                question: "å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•(FIFO)ä¼šå‡ºç°'Beladyå¼‚å¸¸'ï¼Œå³å¢åŠ å†…å­˜å¸§æ•°æ—¶ï¼Œç¼ºé¡µæ¬¡æ•°åè€Œå¢åŠ ã€‚()",
                answer: "A"
            },
            {
                id: 6,
                question: "æ ‘å½¢ç›®å½•ç»“æ„ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰å”¯ä¸€çš„ç»å¯¹è·¯å¾„ï¼Œä»å½“å‰ç›®å½•ä½ç½®å¼€å§‹åˆ°æ–‡ä»¶çš„è·¯å¾„ã€‚()",
                answer: "B"
            },
            {
                id: 7,
                question: "ä¸€æ—¦å‡ºç°æ­»é”ï¼Œæ‰€æœ‰è¿›ç¨‹éƒ½ä¸èƒ½è¿è¡Œã€‚()",
                answer: "B"
            },
            {
                id: 8,
                question: "ç£ç›˜é©±åŠ¨è°ƒåº¦ä¸»è¦åˆ†ä¸ºç§»è‡‚è°ƒåº¦å’Œæ—‹è½¬è°ƒåº¦ï¼Œå®ƒä»¬çš„æ‰§è¡Œæ¬¡åºéšä¾¿ã€‚()",
                answer: "B"
            },
            {
                id: 9,
                question: "DMAæ–¹å¼ä¸‹ï¼Œæ•°æ®çš„ä¼ è¾“æ˜¯åœ¨DMAæ§åˆ¶å™¨çš„æ§åˆ¶ä¸‹å®Œæˆçš„ï¼Œæ— éœ€CPUå¹²é¢„ã€‚()",
                answer: "A"
            },
            {
                id: 10,
                question: "æ“ä½œç³»ç»Ÿæ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­æœ€æ¥è¿‘ç¡¬ä»¶çš„ç³»ç»Ÿè½¯ä»¶ã€‚()",
                answer: "A"
            },
            {
                id: 11,
                question: "åŸè¯­æ“ä½œæ˜¯ä¸å¯ä¸­æ–­çš„ï¼Œè¿›ç¨‹åˆ›å»ºã€æ’¤é”€ç­‰æ“ä½œéƒ½å±äºåŸè¯­æ“ä½œã€‚()",
                answer: "A"
            },
            {
                id: 12,
                question: "é“¶è¡Œå®¶ç®—æ³•æ˜¯ä¸€ç§æ­»é”é¢„é˜²ç®—æ³•ï¼Œèƒ½å¤Ÿä¿è¯ç³»ç»Ÿå§‹ç»ˆå¤„äºå®‰å…¨çŠ¶æ€ã€‚()",
                answer: "B"
            },
            {
                id: 13,
                question: "å¤šé“ç¨‹åºçš„å¹¶å‘æ‰§è¡Œå¤±å»äº†å°é—­æ€§å’Œå¯å†ç°æ€§,å› æ­¤å¤šé“ç¨‹åºè®¾è®¡ä¸­æ— éœ€å°é—­æ€§å’Œå¯å†ç°æ€§ã€‚()",
                answer: "B"
            },
            {
                id: 14,
                question: "åŠ¨æ€é‡å®šä½éœ€è¦é‡å®šä½å¯„å­˜å™¨çš„æ”¯æŒã€‚()",
                answer: "A"
            },
            {
                id: 15,
                question: "ä¸ºäº†å‡å°‘ç¼ºé¡µä¸­æ–­ç‡ï¼Œé¡µé¢åº”è¯¥å°ä¸€äº›ã€‚()",
                answer: "B"
            },
            {
                id: 16,
                question: "è‹¥ç”¨æˆ·å¯¹æŸä¸ªæ–‡ä»¶æœ‰å†™æƒé™ã€åˆ™å¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶ã€‚()",
                answer: "B"
            },
            {
                id: 17,
                question: "ç”±äºæ­»é”æ˜¯ä¸€ç§ä¸æ—¶é—´æœ‰å…³çš„é”™è¯¯ï¼Œå› æ­¤å®ƒä¸è¿›ç¨‹æ¨è¿›çš„é€Ÿåº¦æ— å…³ã€‚()",
                answer: "B"
            },
            {
                id: 18,
                question: "æ¯å½“ä¸­æ–­å¤„ç†å®Œæˆåï¼Œéƒ½å°†è¿”å›è¢«ä¸­æ–­è¿›ç¨‹è¢«ä¸­æ–­å¤„ç»§ç»­æ‰§è¡Œã€‚()",
                answer: "B"
            },
            {
                id: 19,
                question: "ç”¨æˆ·æ˜¯ç”¨ç‰©ç†è®¾å¤‡åæ¥ç”³è¯·ä½¿ç”¨è®¾å¤‡çš„ã€‚()",
                answer: "B"
            },
            {
                id: 20,
                question: "æ‰¹å¤„ç†ç³»ç»Ÿçš„ä¸»è¦ç¼ºç‚¹æ˜¯ç¼ºä¹äº¤äº’æ€§ã€‚()",
                answer: "A"
            },
            {
                id: 21,
                question: "çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯CPUè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹è‡ªå·±æ‹¥æœ‰ç³»ç»Ÿèµ„æºã€‚()",
                answer: "B"
            },
            {
                id: 22,
                question: "åŸè¯­çš„æ‰§è¡Œè¿‡ç¨‹å¯ä»¥è¢«ä¸­æ–­ã€‚()",
                answer: "B"
            },
            {
                id: 23,
                question: "è¿›ç¨‹åŒæ­¥çš„ä¸»è¦ä»»åŠ¡æ˜¯ä½¿å¹¶å‘æ‰§è¡Œçš„è¿›ç¨‹ä¹‹é—´èƒ½æœ‰æ•ˆåœ°å…±äº«èµ„æºå’Œç›¸äº’åˆä½œã€‚()",
                answer: "A"
            },
            {
                id: 24,
                question: "è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†ç³»ç»Ÿä¸­,è‹¥æŠŠé¡µé¢çš„å¤§å°å¢åŠ ä¸€å€,åˆ™ç¼ºé¡µä¸­æ–­æ¬¡æ•°ä¼šå‡å°‘50%ã€‚()",
                answer: "B"
            },
            {
                id: 25,
                question: "æé«˜è¯·æ±‚åˆ†é¡µç³»ç»Ÿä¸­å†…å­˜çš„åˆ©ç”¨ç‡,å…è®¸ç”¨æˆ·ä½¿ç”¨ä¸åŒå¤§å°çš„é¡µé¢ã€‚()",
                answer: "B"
            },
            {
                id: 26,
                question: "æ–‡ä»¶ä¿æŠ¤å°±æ˜¯ç¦æ­¢å¯¹æ–‡ä»¶è¿›è¡Œå­˜å–æ“ä½œã€‚()",
                answer: "B"
            },
            {
                id: 27,
                question: "å¦‚æœèµ„æºåˆ†é…å›¾ä¸å¯å®Œå…¨ç®€åŒ–(å³:å›¾ä¸­è¿˜æœ‰'è¾¹'å­˜åœ¨),åˆ™ä¼šäº§ç”Ÿæ­»é”ã€‚()",
                answer: "A"
            },
            {
                id: 28,
                question: "é€šé“æ‰€æ‰§è¡Œçš„é€šé“ç¨‹åºå­˜æ”¾åœ¨ä¸»æœºçš„å†…å­˜ä¸­ã€‚()",
                answer: "A"
            },
            {
                id: 29,
                question: "ç£ç›˜è°ƒåº¦ç®—æ³•ä¸­ï¼ŒSCANå’ŒCSCANç®—æ³•å¯ä»¥é¿å…é¥¥é¥¿ç°è±¡ã€‚()",
                answer: "A"
            },
            {
                id: 30,
                question: "æ“ä½œç³»ç»Ÿçš„æ‰€æœ‰ç¨‹åºéƒ½å¿…é¡»å¸¸é©»å†…å­˜ã€‚()",
                answer: "B"
            }
        ];

        // åˆ¤æ–­é¢˜é€‰é¡¹ - å·²ä¿®æ”¹ä¸º"æ­£ç¡®"å’Œ"é”™è¯¯"
        const judgementOptions = [
            "A.æ­£ç¡®",
            "B.é”™è¯¯"
        ];

        // ä»æ‰€æœ‰é¢˜ç›®ä¸­éšæœºæŠ½å–10é“
        function getRandomQuestions(allQuestions, count) {
            const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        // å½“å‰æµ‹è¯•çŠ¶æ€
        let currentTest = {
            questions: [],
            currentIndex: 0,
            userAnswers: [],
            score: 0,
            submitted: false
        };

        // DOMå…ƒç´ 
        const questionContainer = document.getElementById('question-container');
        const currentQuestionSpan = document.getElementById('current-question');
        const totalQuestionsSpan = document.getElementById('total-questions');
        const answeredCountSpan = document.getElementById('answered-count');
        const progressBar = document.getElementById('progress');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const resultDiv = document.getElementById('result');
        const answerFeedback = document.getElementById('answer-feedback');
        const showAnswerBtn = document.getElementById('show-answer-btn');

        // åˆå§‹åŒ–æµ‹è¯•
        function initTest() {
            currentTest.questions = getRandomQuestions(judgementQuestions, 10);
            currentTest.currentIndex = 0;
            currentTest.userAnswers = new Array(10).fill(null);
            currentTest.score = 0;
            currentTest.submitted = false;
            
            totalQuestionsSpan.textContent = '10';
            resultDiv.style.display = 'none';
            answerFeedback.style.display = 'none';
            updateProgress();
            displayQuestion();
            updateButtons();
        }

        // æ˜¾ç¤ºå½“å‰é¢˜ç›®
        function displayQuestion() {
            const question = currentTest.questions[currentTest.currentIndex];
            currentQuestionSpan.textContent = currentTest.currentIndex + 1;
            
            let html = `<div class="question">${currentTest.currentIndex + 1}. ${question.question}</div>`;
            html += '<div class="options">';
            
            judgementOptions.forEach((option, index) => {
                const optionLetter = option.charAt(0);
                const isSelected = currentTest.userAnswers[currentTest.currentIndex] === optionLetter;
                const isCorrect = currentTest.submitted && optionLetter === question.answer;
                const isIncorrect = currentTest.submitted && isSelected && optionLetter !== question.answer;
                
                let className = 'option';
                if (isSelected) className += ' selected';
                if (isCorrect) className += ' correct';
                if (isIncorrect) className += ' incorrect';
                
                // å·²ä¿®æ­£ï¼šä»ç¬¬2ä¸ªå­—ç¬¦å¼€å§‹æˆªå–ï¼Œæ­£ç¡®æ˜¾ç¤º"æ­£ç¡®"å’Œ"é”™è¯¯"
                const optionText = option.substring(2);
                
                html += `
                    <div class="${className}" data-option="${optionLetter}">
                        <div class="option-indicator">${optionLetter}</div>
                        <div class="option-text">${optionText}</div>
                    </div>
                `;
            });
            
            html += '</div>';
            questionContainer.innerHTML = html;
            
            // æ·»åŠ é€‰é¡¹ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', () => {
                    if (!currentTest.submitted) {
                        selectOption(option.dataset.option);
                    }
                });
            });
        }

        // é€‰æ‹©é€‰é¡¹
        function selectOption(option) {
            currentTest.userAnswers[currentTest.currentIndex] = option;
            updateProgress();
            updateButtons();
            
            // éšè—ä¹‹å‰çš„ç­”æ¡ˆåé¦ˆ
            answerFeedback.style.display = 'none';
            
            // å¦‚æœæµ‹è¯•æœªæäº¤ï¼Œå¯ç”¨æŸ¥çœ‹ç­”æ¡ˆæŒ‰é’®
            if (!currentTest.submitted) {
                showAnswerBtn.disabled = false;
            }
            
            displayQuestion();
        }

        // æ˜¾ç¤ºç­”æ¡ˆ
        function showAnswer() {
            const currentQuestion = currentTest.questions[currentTest.currentIndex];
            const correctAnswerText = currentQuestion.answer === "A" ? "æ­£ç¡®" : "é”™è¯¯";
            
            answerFeedback.innerHTML = `
                <div class="correct-answer">
                    <strong>æ­£ç¡®ç­”æ¡ˆï¼š${correctAnswerText}</strong>
                </div>
            `;
            answerFeedback.className = 'answer-feedback correct-answer';
            answerFeedback.style.display = 'block';
            
            // ç¦ç”¨æŸ¥çœ‹ç­”æ¡ˆæŒ‰é’®
            showAnswerBtn.disabled = true;
            
            // æ·»åŠ åŠ¨ç”»æ•ˆæœ
            answerFeedback.style.animation = 'slideIn 0.3s forwards';
        }

        // æ›´æ–°è¿›åº¦æ¡å’Œå·²ç­”é¢˜æ•°
        function updateProgress() {
            const answeredCount = currentTest.userAnswers.filter(answer => answer !== null).length;
            answeredCountSpan.textContent = answeredCount;
            progressBar.style.width = `${(answeredCount / 10) * 100}%`;
        }

        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        function updateButtons() {
            prevBtn.disabled = currentTest.currentIndex === 0;
            
            if (currentTest.currentIndex === 9) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }
            
            // å¦‚æœå·²æäº¤ï¼Œç¦ç”¨æ‰€æœ‰æŒ‰é’®
            if (currentTest.submitted) {
                showAnswerBtn.disabled = true;
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                submitBtn.disabled = true;
            } else {
                // å¦‚æœå½“å‰é¢˜å·²ç­”ï¼Œå¯ç”¨æŸ¥çœ‹ç­”æ¡ˆæŒ‰é’®
                const hasAnswered = currentTest.userAnswers[currentTest.currentIndex] !== null;
                showAnswerBtn.disabled = !hasAnswered;
            }
        }

        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            if (currentTest.currentIndex < 9) {
                currentTest.currentIndex++;
                answerFeedback.style.display = 'none';
                showAnswerBtn.disabled = currentTest.userAnswers[currentTest.currentIndex] === null;
                displayQuestion();
                updateButtons();
            }
        }

        // ä¸Šä¸€é¢˜
        function prevQuestion() {
            if (currentTest.currentIndex > 0) {
                currentTest.currentIndex--;
                answerFeedback.style.display = 'none';
                showAnswerBtn.disabled = currentTest.userAnswers[currentTest.currentIndex] === null;
                displayQuestion();
                updateButtons();
            }
        }

        // æäº¤ç­”æ¡ˆ
        function submitAnswers() {
            currentTest.submitted = true;
            
            // è®¡ç®—å¾—åˆ†
            currentTest.score = 0;
            const wrongQuestions = [];
            
            currentTest.questions.forEach((question, index) => {
                if (currentTest.userAnswers[index] === question.answer) {
                    currentTest.score++;
                } else {
                    const userAnswerText = currentTest.userAnswers[index] ? 
                        (currentTest.userAnswers[index] === "A" ? "æ­£ç¡®" : "é”™è¯¯") : 'æœªä½œç­”';
                    const correctAnswerText = question.answer === "A" ? "æ­£ç¡®" : "é”™è¯¯";
                    
                    wrongQuestions.push({
                        question: question.question,
                        userAnswer: userAnswerText,
                        correctAnswer: correctAnswerText
                    });
                }
            });
            
            // æ˜¾ç¤ºç»“æœ
            const pass = currentTest.score >= 6;
            resultDiv.className = `result ${pass ? 'pass' : 'fail'}`;
            
            let resultHtml = `
                <h2>${pass ? 'ğŸ‰ æ­å–œæ‚¨é€šè¿‡æµ‹è¯•ï¼' : 'ğŸ˜¢ å¾ˆé—æ†¾ï¼Œæ‚¨æœªé€šè¿‡æµ‹è¯•'}</h2>
                <div class="score">å¾—åˆ†: ${currentTest.score}/10 (${(currentTest.score/10 * 100).toFixed(1)}%)</div>
                <p>${pass ? 'æ‚¨å·²æŒæ¡æ“ä½œç³»ç»Ÿçš„åŸºæœ¬çŸ¥è¯†ã€‚' : 'å»ºè®®æ‚¨å¤ä¹ ç›¸å…³çŸ¥è¯†ç‚¹åå†è¯•ã€‚'}</p>
            `;
            
            // æ˜¾ç¤ºé”™é¢˜è¯¦æƒ…
            if (wrongQuestions.length > 0) {
                resultHtml += `
                    <div class="result-details">
                        <h3>é”™é¢˜åˆ†æ (å…±${wrongQuestions.length}é¢˜)ï¼š</h3>
                `;
                
                wrongQuestions.forEach((wrong, index) => {
                    resultHtml += `
                        <div class="wrong-question">
                            <p><strong>ç¬¬${index + 1}é¢˜ï¼š${wrong.question}</strong></p>
                            <p class="wrong-answer">âŒ æ‚¨çš„ç­”æ¡ˆï¼š${wrong.userAnswer}</p>
                            <p class="correct-answer-detail">âœ… æ­£ç¡®ç­”æ¡ˆï¼š${wrong.correctAnswer}</p>
                        </div>
                    `;
                });
                
                resultHtml += '</div>';
            }
            
            resultHtml += '<button id="restart-test-btn" class="restart-btn">é‡æ–°å¼€å§‹æµ‹è¯•</button>';
            resultDiv.innerHTML = resultHtml;
            resultDiv.style.display = 'block';
            
            // é‡æ–°å¼€å§‹æµ‹è¯•æŒ‰é’®äº‹ä»¶
            document.getElementById('restart-test-btn').addEventListener('click', initTest);
            
            updateButtons();
            displayQuestion();
        }

        // äº‹ä»¶ç›‘å¬
        prevBtn.addEventListener('click', prevQuestion);
        nextBtn.addEventListener('click', nextQuestion);
        submitBtn.addEventListener('click', submitAnswers);
        showAnswerBtn.addEventListener('click', showAnswer);

        // é”®ç›˜å¿«æ·é”®æ”¯æŒ
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' && !nextBtn.disabled) {
                nextQuestion();
            } else if (e.key === 'ArrowLeft' && !prevBtn.disabled) {
                prevQuestion();
            } else if ((e.key === '1' || e.key === 'A' || e.key === 'a') && !currentTest.submitted) {
                // æŒ‰1ã€Aæˆ–aé€‰æ‹©æ­£ç¡®
                selectOption("A");
            } else if ((e.key === '2' || e.key === 'B' || e.key === 'b') && !currentTest.submitted) {
                // æŒ‰2ã€Bæˆ–bé€‰æ‹©é”™è¯¯
                selectOption("B");
            } else if (e.key === 'Enter' && !currentTest.submitted) {
                // Enteré”®æäº¤
                if (currentTest.currentIndex === 9) {
                    submitAnswers();
                } else {
                    nextQuestion();
                }
            }
        });

        // åˆå§‹åŒ–
        window.onload = initTest;
    </script>
</body>
</html>